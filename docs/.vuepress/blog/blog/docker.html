<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker ä½¿ç”¨ | &lt;Encaikå­¦å‰ç«¯/&gt;</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/img/favicon.ico">
    <link rel="manifest" href="/json/manifest.json">
    <link rel="apple-touch-icon" href="/img/favicon.ico">
    <link rel="mask-icon" href="/img/favicon.ico" color="#fff">
    <meta name="description" content="<Encaikå­¦å‰ç«¯/>">
    <meta name="theme-color" content="#fff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/img/favicon.ico">
    <meta name="msapplication-TileColor" content="#fff">
    <link rel="preload" href="/assets/css/0.styles.68f41e63.css" as="style"><link rel="preload" href="/assets/js/app.79d44716.js" as="script"><link rel="preload" href="/assets/js/3.02789bd5.js" as="script"><link rel="preload" href="/assets/js/2.40a5696b.js" as="script"><link rel="preload" href="/assets/js/17.c1c899ff.js" as="script"><link rel="preload" href="/assets/js/4.ad3dc3f9.js" as="script"><link rel="prefetch" href="/assets/js/10.de242e5f.js"><link rel="prefetch" href="/assets/js/11.c2b2d2b6.js"><link rel="prefetch" href="/assets/js/12.92c84dbf.js"><link rel="prefetch" href="/assets/js/13.5016194e.js"><link rel="prefetch" href="/assets/js/14.bbb0f71e.js"><link rel="prefetch" href="/assets/js/15.f668f9a0.js"><link rel="prefetch" href="/assets/js/16.f6197b7c.js"><link rel="prefetch" href="/assets/js/18.4020d3c1.js"><link rel="prefetch" href="/assets/js/19.279c12c6.js"><link rel="prefetch" href="/assets/js/20.67d83e1a.js"><link rel="prefetch" href="/assets/js/21.c58dd08d.js"><link rel="prefetch" href="/assets/js/22.48b8f556.js"><link rel="prefetch" href="/assets/js/23.012e3a14.js"><link rel="prefetch" href="/assets/js/24.7044b7c7.js"><link rel="prefetch" href="/assets/js/25.79f1e833.js"><link rel="prefetch" href="/assets/js/26.f4ebdf55.js"><link rel="prefetch" href="/assets/js/27.9d8313ed.js"><link rel="prefetch" href="/assets/js/28.b1cc54b7.js"><link rel="prefetch" href="/assets/js/29.b22015f1.js"><link rel="prefetch" href="/assets/js/30.9f54dc55.js"><link rel="prefetch" href="/assets/js/31.bd8b67ac.js"><link rel="prefetch" href="/assets/js/32.6e9fd763.js"><link rel="prefetch" href="/assets/js/33.1c3a11f0.js"><link rel="prefetch" href="/assets/js/34.c3fbee85.js"><link rel="prefetch" href="/assets/js/35.ebcc0c8b.js"><link rel="prefetch" href="/assets/js/36.abf759e2.js"><link rel="prefetch" href="/assets/js/37.ec1831bc.js"><link rel="prefetch" href="/assets/js/38.36803efb.js"><link rel="prefetch" href="/assets/js/39.2cf381f3.js"><link rel="prefetch" href="/assets/js/40.0fe9fd57.js"><link rel="prefetch" href="/assets/js/41.9aa7f4b3.js"><link rel="prefetch" href="/assets/js/42.c8cb78e0.js"><link rel="prefetch" href="/assets/js/43.597eb1d6.js"><link rel="prefetch" href="/assets/js/44.0e84d040.js"><link rel="prefetch" href="/assets/js/45.281c889a.js"><link rel="prefetch" href="/assets/js/46.e634739c.js"><link rel="prefetch" href="/assets/js/47.8e304718.js"><link rel="prefetch" href="/assets/js/48.7de3c656.js"><link rel="prefetch" href="/assets/js/49.71a16622.js"><link rel="prefetch" href="/assets/js/5.f3995644.js"><link rel="prefetch" href="/assets/js/50.7ddbc590.js"><link rel="prefetch" href="/assets/js/51.f9119451.js"><link rel="prefetch" href="/assets/js/52.0987e290.js"><link rel="prefetch" href="/assets/js/53.826b5c64.js"><link rel="prefetch" href="/assets/js/54.04984c88.js"><link rel="prefetch" href="/assets/js/55.66e4655a.js"><link rel="prefetch" href="/assets/js/56.9e96e663.js"><link rel="prefetch" href="/assets/js/57.3cb3e907.js"><link rel="prefetch" href="/assets/js/58.a9c4ae8c.js"><link rel="prefetch" href="/assets/js/59.2c442be4.js"><link rel="prefetch" href="/assets/js/6.3d336cbb.js"><link rel="prefetch" href="/assets/js/60.58490093.js"><link rel="prefetch" href="/assets/js/61.044ae301.js"><link rel="prefetch" href="/assets/js/62.b8efdf1e.js"><link rel="prefetch" href="/assets/js/63.278aa082.js"><link rel="prefetch" href="/assets/js/64.8a31c056.js"><link rel="prefetch" href="/assets/js/65.7e7817bb.js"><link rel="prefetch" href="/assets/js/66.5f8230f4.js"><link rel="prefetch" href="/assets/js/67.f1aa364f.js"><link rel="prefetch" href="/assets/js/68.41a4df20.js"><link rel="prefetch" href="/assets/js/69.ebd0b127.js"><link rel="prefetch" href="/assets/js/7.f48b584f.js"><link rel="prefetch" href="/assets/js/70.a85cbd13.js"><link rel="prefetch" href="/assets/js/71.b753690e.js"><link rel="prefetch" href="/assets/js/72.fbd9f56c.js"><link rel="prefetch" href="/assets/js/73.22ea4a0c.js"><link rel="prefetch" href="/assets/js/74.e288f4ce.js"><link rel="prefetch" href="/assets/js/75.49c56359.js"><link rel="prefetch" href="/assets/js/76.27436bd4.js"><link rel="prefetch" href="/assets/js/77.9e82a315.js"><link rel="prefetch" href="/assets/js/78.ac1fcf1c.js"><link rel="prefetch" href="/assets/js/79.370b8c0b.js"><link rel="prefetch" href="/assets/js/8.d48b0f43.js"><link rel="prefetch" href="/assets/js/80.7eea54db.js"><link rel="prefetch" href="/assets/js/9.bcb1cf5f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.68f41e63.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">&lt;Encaikå­¦å‰ç«¯/&gt;</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">ğŸ é¦–é¡µ</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">ğŸ““å­¦ä¹ æ—¥å¿—</a></div><div class="nav-item"><a href="/note/" class="nav-link">ğŸ“ƒç¬”è®°æ‘˜å½•</a></div><div class="nav-item"><a href="/leecode/" class="nav-link">ğŸ“°åŠ›æ‰£è®°å½•</a></div><div class="nav-item"><a href="/repo/" class="nav-link">ğŸ“¦é¡¹ç›®æ€»ç»“</a></div><div class="nav-item"><a href="/road/" class="nav-link">ğŸ“–çŸ¥è¯†æ€»è§ˆ</a></div><div class="nav-item"><a href="https://github.com/Encaik" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://gitee.com/encaik" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ç äº‘
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://encaik.gitee.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  [å›½å†…é•œåƒ]
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">ğŸ é¦–é¡µ</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">ğŸ““å­¦ä¹ æ—¥å¿—</a></div><div class="nav-item"><a href="/note/" class="nav-link">ğŸ“ƒç¬”è®°æ‘˜å½•</a></div><div class="nav-item"><a href="/leecode/" class="nav-link">ğŸ“°åŠ›æ‰£è®°å½•</a></div><div class="nav-item"><a href="/repo/" class="nav-link">ğŸ“¦é¡¹ç›®æ€»ç»“</a></div><div class="nav-item"><a href="/road/" class="nav-link">ğŸ“–çŸ¥è¯†æ€»è§ˆ</a></div><div class="nav-item"><a href="https://github.com/Encaik" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://gitee.com/encaik" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ç äº‘
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://encaik.gitee.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  [å›½å†…é•œåƒ]
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/" aria-current="page" class="sidebar-link">å‰ç«¯å·¥ç¨‹åŒ–é¡¹ç›®æ„å»ºæµç¨‹åŠåŸºæœ¬ç»“æ„</a></li><li><a href="/blog/vscode-extension.html" class="sidebar-link">å­¦ä¹  vscode æ’ä»¶å¼€å‘</a></li><li><a href="/blog/svelte.html" class="sidebar-link">åˆè¯• svelte å‰ç«¯å¼€å‘</a></li><li><a href="/blog/socketio.html" class="sidebar-link">ä½¿ç”¨ socket.io åšä¸€ä¸ªåœ¨çº¿èŠå¤©å®¤</a></li><li><a href="/blog/mapbox.html" class="sidebar-link">ä½¿ç”¨ mapbox-gl åˆ›å»ºæ•°æ®å¯è§†åŒ–åœ°å›¾</a></li><li><a href="/blog/d3.html" class="sidebar-link">å­¦ä¹ ä½¿ç”¨ D3.js ä¸ºå›¾ç‰‡ç»˜åˆ¶æ ‡æ³¨</a></li><li><a href="/blog/electron-angular.html" class="sidebar-link">å­¦ä¹  Electron æ¡†æ¶é…åˆ Angular åˆ¶ä½œæ¡Œé¢ç«¯åº”ç”¨</a></li><li><a href="/blog/electron-vue.html" class="sidebar-link">å­¦ä¹  Electron æ¡†æ¶é…åˆ Vue åˆ¶ä½œæ¡Œé¢ç«¯åº”ç”¨</a></li><li><a href="/blog/amap.html" class="sidebar-link">é«˜å¾· JS api æ€»ç»“</a></li><li><a href="/blog/three.html" class="sidebar-link">å­¦ä¹  three.js åº“çš„ä½¿ç”¨</a></li><li><a href="/blog/flex&amp;grid.html" class="sidebar-link">è¯¦ç»†ç†è§£ Flexbox ä¸ Gridbox å¸ƒå±€å±æ€§</a></li><li><a href="/blog/puppeteer.html" class="sidebar-link">åˆæ­¥å­¦ä¹ å¦‚ä½•ä½¿ç”¨ puppeteer æ“æ§æ— å¤´æµè§ˆå™¨</a></li><li><a href="/blog/springboot.html" class="sidebar-link">å­¦ä¹  Springboot åšåç«¯</a></li><li><a href="/blog/nodespider.html" class="sidebar-link">ä½¿ç”¨ node.js å®Œæˆçˆ¬è™«æ“ä½œ</a></li><li><a href="/blog/nodecli.html" class="sidebar-link">è‡ªå·±åšä¸€ä¸ªå¸¦ cli çš„ npm åŒ…å‘å¸ƒ</a></li><li><a href="/blog/webpack.html" class="sidebar-link">åˆ†æ webpack æºç ï¼Œç†è§£åŸç†</a></li><li><a href="/blog/echarts.html" class="sidebar-link">Echarts çš„ä½¿ç”¨åŠé…ç½®é¡¹å¯¹ç…§</a></li><li><a href="/blog/csspre.html" class="sidebar-link">CSS é¢„å¤„ç†å™¨-Sassï¼ŒLessï¼ŒStylus å¯¹æ¯”</a></li><li><a href="/blog/taro.html" class="sidebar-link">Taro å¤šç«¯ç»Ÿä¸€å°ç¨‹åºæ¡†æ¶ä½“éªŒ</a></li><li><a href="/blog/deno.html" class="sidebar-link">åˆæ¢ Denoï¼Œå­¦ä¹ ç”¨æ³•</a></li><li><a href="/blog/ast.html" class="sidebar-link">ä» estree å’Œ babel ä¸­å­¦ä¹  js çš„ AST</a></li><li><a href="/blog/canvas.html" class="sidebar-link">å­¦ä¹ canvasåˆ¶ä½œä¸€ä¸ªä»£ç ç¾åŒ–æˆªå›¾é¡µé¢</a></li><li><a href="/blog/console.html" class="sidebar-link">å­¦ä¹ ä½¿ç”¨èŠ±é‡Œèƒ¡å“¨çš„Console</a></li><li><a href="/blog/performance.html" class="sidebar-link">å­¦ä¹ å‰ç«¯æ€§èƒ½ç›‘æ§PerformanceApi</a></li><li><a href="/blog/g6.html" class="sidebar-link">å­¦ä¹  AntV G6 å›¾å¯è§†åŒ–å¼•æ“</a></li><li><a href="/blog/tdt&amp;cesium.html" class="sidebar-link">å¤©åœ°å›¾ api åŠ Cesium.js åº“æ€»ç»“</a></li><li><a href="/blog/golang.html" class="sidebar-link">å­¦ä¹ ä½¿ç”¨Golang</a></li><li><a href="/blog/angular.html" class="sidebar-link">å­¦ä¹ ä½¿ç”¨ Angular</a></li><li><a href="/blog/vue3.html" class="sidebar-link">ä»å¤´å¼€å§‹å­¦ä¹ Vue3æºç </a></li><li><a href="/blog/vue2.html" class="sidebar-link">ä»å¤´å¼€å§‹å­¦ä¹ Vue2æºç </a></li><li><a href="/blog/tensorflow.html" class="sidebar-link">å­¦ä¹ ä½¿ç”¨ Tensorflow.js æœºå™¨å­¦ä¹ </a></li><li><a href="/blog/koa2-learn.html" class="sidebar-link">Koa2åŸºæœ¬å­¦ä¹ </a></li><li><a href="/blog/docker-project.html" class="sidebar-link">docker-composeéƒ¨ç½²æµç¨‹</a></li><li><a href="/blog/docker-compose.html" class="sidebar-link">Docker-composeä½¿ç”¨</a></li><li><a href="/blog/docker.html" aria-current="page" class="active sidebar-link">Docker ä½¿ç”¨</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/docker.html#å®‰è£…" class="sidebar-link">å®‰è£…</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/docker.html#ubuntu" class="sidebar-link">Ubuntu</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/docker.html#æ¦‚å¿µ" class="sidebar-link">æ¦‚å¿µ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/docker.html#é•œåƒ" class="sidebar-link">é•œåƒ</a></li><li class="sidebar-sub-header"><a href="/blog/docker.html#å®¹å™¨" class="sidebar-link">å®¹å™¨</a></li></ul></li></ul></li><li><a href="/blog/flutter.html" class="sidebar-link">å­¦ä¹ ä½¿ç”¨Flutterè¿›è¡Œç§»åŠ¨ç«¯å¼€å‘</a></li><li><a href="/blog/react-native.html" class="sidebar-link">React Nativeå­¦ä¹ -åˆ›å»ºé¡¹ç›®</a></li><li><a href="/blog/react.html" class="sidebar-link">Reactå­¦ä¹ -åˆ›å»ºé¡¹ç›®</a></li><li><a href="/blog/vuetestutils2.html" class="sidebar-link">vue-test-utilså­¦ä¹ -ç”¨nightwatchè¿›è¡Œe2eæµ‹è¯•</a></li><li><a href="/blog/vuetestutils.html" class="sidebar-link">vue-test-utilså­¦ä¹ -ç”¨jestè¿›è¡Œå•å…ƒæµ‹è¯•</a></li><li><a href="/blog/tsspider.html" class="sidebar-link">Typescrå­¦ä¹ -å®ç°åŸºç¡€çˆ¬è™«</a></li><li><a href="/blog/egg.html" class="sidebar-link">å­¦ä¹ ä½¿ç”¨Egg.jsæ­å»ºåç«¯</a></li><li><a href="/blog/tonejs.html" class="sidebar-link">å­¦ä¹ ä½¿ç”¨ Tone.js åˆ¶ä½œç½‘é¡µç‰ˆä¹å™¨</a></li><li><a href="/blog/http.html" class="sidebar-link">å‰ç«¯è¯·æ±‚å‘å±•åŠä½¿ç”¨</a></li><li><a href="/blog/git.html" class="sidebar-link">Git è¯­æ³•åŠä½¿ç”¨</a></li><li><a href="/blog/vuepress.html" class="sidebar-link">Vuepressæ­å»ºåšå®¢</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="docker-ä½¿ç”¨"><a href="#docker-ä½¿ç”¨" class="header-anchor">#</a> Docker ä½¿ç”¨</h1> <h2 id="å®‰è£…"><a href="#å®‰è£…" class="header-anchor">#</a> å®‰è£…</h2> <h3 id="ubuntu"><a href="#ubuntu" class="header-anchor">#</a> Ubuntu</h3> <h4 id="å¸è½½æ—§ç‰ˆæœ¬"><a href="#å¸è½½æ—§ç‰ˆæœ¬" class="header-anchor">#</a> å¸è½½æ—§ç‰ˆæœ¬</h4> <p>dockerçš„æ—§ç‰ˆæœ¬è¢«ç§°ä¸ºdocker,docker.io æˆ–docker-engineã€‚å¦‚æœå·²å®‰è£…,è¯·å¸è½½å®ƒä»¬:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">\</span>$ <span class="token function">sudo</span> <span class="token function">apt-get</span> remove docker docker-engine docker.io containerd runc
</code></pre></div><h4 id="ä»å­˜å‚¨åº“å®‰è£…"><a href="#ä»å­˜å‚¨åº“å®‰è£…" class="header-anchor">#</a> ä»å­˜å‚¨åº“å®‰è£…</h4> <h5 id="è®¾ç½®å­˜å‚¨åº“"><a href="#è®¾ç½®å­˜å‚¨åº“" class="header-anchor">#</a> è®¾ç½®å­˜å‚¨åº“</h5> <ol><li><p>æ›´æ–°aptåŒ…ç´¢å¼•:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">\</span>$ <span class="token function">sudo</span> <span class="token function">apt-get</span> update
</code></pre></div></li> <li><p>å®‰è£…è½¯ä»¶åŒ…ä»¥å…è®¸apté€šè¿‡HTTPSä½¿ç”¨å­˜å‚¨åº“:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">\</span>$ <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> apt-transport-https ca-certificates <span class="token function">curl</span> gnupg-agent software-properties-common
</code></pre></div></li> <li><p>æ·»åŠ Dockerçš„å®˜æ–¹GPGå¯†é’¥:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">\</span>$ <span class="token function">curl</span> -fsSL https://download.docker.com/linux/ubuntu/gpg <span class="token operator">|</span> <span class="token function">sudo</span> apt-key <span class="token function">add</span> -
</code></pre></div><p><code>9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88</code>é€šè¿‡æœç´¢æŒ‡çº¹çš„å8ä¸ªå­—ç¬¦,éªŒè¯æ‚¨ç°åœ¨æ˜¯å¦æ‹¥æœ‰å¸¦æœ‰æŒ‡çº¹çš„å¯†é’¥ ã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">\</span>$ <span class="token function">sudo</span> apt-key fingerprint 0EBFCD88

pub   rsa4096 <span class="token number">2017</span>-02-22 <span class="token punctuation">[</span>SCEA<span class="token punctuation">]</span>
      9DC8 <span class="token number">5822</span> 9FC7 DD38 854A  E2D8 8D81 803C 0EBF CD88
uid           <span class="token punctuation">[</span> unknown<span class="token punctuation">]</span> Docker Release <span class="token punctuation">(</span>CE deb<span class="token punctuation">)</span> <span class="token operator">&lt;</span>docker@docker.com<span class="token operator">&gt;</span>
sub   rsa4096 <span class="token number">2017</span>-02-22 <span class="token punctuation">[</span>S<span class="token punctuation">]</span>
</code></pre></div></li> <li><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥è®¾ç½®ç¨³å®šçš„å­˜å‚¨åº“ã€‚è¦æ·»åŠ  æ¯æ™šæˆ–æµ‹è¯•å­˜å‚¨åº“,è¯·åœ¨ä»¥ä¸‹å‘½ä»¤ä¸­çš„å•è¯åé¢æ·»åŠ nightlyæˆ–testï¼ˆæˆ–åŒæ—¶æ·»åŠ ï¼‰stableã€‚</p> <div class="custom-block tip"><p class="custom-block-title">æ³¨æ„</p> <p>ä¸‹é¢çš„lsb_release -cså­å‘½ä»¤è¿”å›Ubuntuå‘è¡Œç‰ˆçš„åç§°,ä¾‹å¦‚xenialã€‚æœ‰æ—¶,åœ¨Linux Mintç­‰å‘è¡Œç‰ˆä¸­,æ‚¨å¯èƒ½éœ€è¦æ›´æ”¹$(lsb_release -cs) ä¸ºçˆ¶Ubuntuå‘è¡Œç‰ˆã€‚ä¾‹å¦‚,å¦‚æœæ‚¨ä½¿ç”¨ Linux Mint Tessa,åˆ™å¯ä»¥ä½¿ç”¨bionicã€‚Dockerå¯¹æœªç»æµ‹è¯•å’Œä¸å—æ”¯æŒçš„Ubuntuå‘è¡Œç‰ˆä¸æä¾›ä»»ä½•ä¿è¯ã€‚</p></div> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">\</span>$ <span class="token function">sudo</span> add-apt-repository <span class="token string">&quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu <span class="token variable"><span class="token variable">$(</span>lsb_release -cs<span class="token variable">)</span></span> stable&quot;</span>
</code></pre></div></li></ol> <h5 id="å®‰è£…docker"><a href="#å®‰è£…docker" class="header-anchor">#</a> å®‰è£…Docker</h5> <ol><li><p>æ›´æ–°aptåŒ…ç´¢å¼•ã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">\</span>$ <span class="token function">sudo</span> <span class="token function">apt-get</span> update
</code></pre></div></li> <li><p>å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„Docker Engine-Communityå’Œcontainerd,æˆ–è€…è½¬åˆ°ä¸‹ä¸€æ­¥å®‰è£…ç‰¹å®šç‰ˆæœ¬:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">\</span>$ <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> docker-ce docker-ce-cli containerd.io
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">æ³¨æ„</p> <p>å¦‚æœå¯ç”¨äº†å¤šä¸ªDockerå­˜å‚¨åº“,åˆ™åœ¨æœªåœ¨apt-get installor apt-get updateå‘½ä»¤ä¸­æŒ‡å®šç‰ˆæœ¬çš„æƒ…å†µä¸‹è¿›è¡Œå®‰è£…æˆ–æ›´æ–°å°†å§‹ç»ˆå®‰è£…å¯èƒ½çš„æœ€é«˜ç‰ˆæœ¬,è¿™å¯èƒ½ä¸é€‚åˆæ‚¨çš„ç¨³å®šæ€§éœ€æ±‚ã€‚</p></div></li> <li><p>è¦å®‰è£…ç‰¹å®šç‰ˆæœ¬çš„Docker Engine-Community,è¯·åœ¨å­˜å‚¨åº“ä¸­åˆ—å‡ºå¯ç”¨ç‰ˆæœ¬,ç„¶åé€‰æ‹©å¹¶å®‰è£…:</p> <p>a. åˆ—å‡ºæ‚¨çš„ä»“åº“ä¸­å¯ç”¨çš„ç‰ˆæœ¬:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">\</span>$ <span class="token function">apt-cache</span> madison docker-ce

  docker-ce <span class="token operator">|</span> <span class="token number">5</span>:18.09.1~3-0~ubuntu-xenial <span class="token operator">|</span> https://download.docker.com/linux/ubuntu  xenial/stable amd64 Packages
  docker-ce <span class="token operator">|</span> <span class="token number">5</span>:18.09.0~3-0~ubuntu-xenial <span class="token operator">|</span> https://download.docker.com/linux/ubuntu  xenial/stable amd64 Packages
  docker-ce <span class="token operator">|</span> <span class="token number">18.06</span>.1~ce~3-0~ubuntu       <span class="token operator">|</span> https://download.docker.com/linux/ubuntu  xenial/stable amd64 Packages
  docker-ce <span class="token operator">|</span> <span class="token number">18.06</span>.0~ce~3-0~ubuntu       <span class="token operator">|</span> https://download.docker.com/linux/ubuntu  xenial/stable amd64 Packages
  <span class="token punctuation">..</span>.
</code></pre></div><p>b. ä½¿ç”¨ç¬¬äºŒåˆ—ä¸­çš„ç‰ˆæœ¬å­—ç¬¦ä¸²å®‰è£…ç‰¹å®šç‰ˆæœ¬,ä¾‹å¦‚5:18.09.1~3-0~ubuntu-xenialã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">\</span>$ <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> docker-ce<span class="token operator">=</span><span class="token operator">&lt;</span>VERSION_STRING<span class="token operator">&gt;</span> docker-ce-cli<span class="token operator">=</span><span class="token operator">&lt;</span>VERSION_STRING<span class="token operator">&gt;</span> containerd.io
</code></pre></div></li> <li><p>é€šè¿‡è¿è¡Œhello-world æ˜ åƒæ¥éªŒè¯æ˜¯å¦æ­£ç¡®å®‰è£…äº†Docker Engine-Community ã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">\</span>$ <span class="token function">sudo</span> docker run hello-world
</code></pre></div><p>æ­¤å‘½ä»¤ä¸‹è½½æµ‹è¯•å›¾åƒå¹¶åœ¨å®¹å™¨ä¸­è¿è¡Œã€‚å®¹å™¨è¿è¡Œæ—¶,å®ƒä¼šæ‰“å°å‚è€ƒæ¶ˆæ¯å¹¶é€€å‡ºã€‚</p></li></ol> <h4 id="ä»è½¯ä»¶åŒ…å®‰è£…"><a href="#ä»è½¯ä»¶åŒ…å®‰è£…" class="header-anchor">#</a> ä»è½¯ä»¶åŒ…å®‰è£…</h4> <p>å¦‚æœæ‚¨ä¸èƒ½ä½¿ç”¨Dockerçš„å­˜å‚¨åº“æ¥å®‰è£…Docker Engine-Community,åˆ™å¯ä»¥ä¸‹è½½.debè¦å‘å¸ƒçš„ æ–‡ä»¶å¹¶æ‰‹åŠ¨å®‰è£…ã€‚æ¯æ¬¡å‡çº§Dockeræ—¶,éƒ½éœ€è¦ä¸‹è½½ä¸€ä¸ªæ–°æ–‡ä»¶ã€‚</p> <ol><li><p>å»<a href="https://download.docker.com/linux/ubuntu/dists/" target="_blank" rel="noopener noreferrer">https://download.docker.com/linux/ubuntu/dists/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>é€‰æ‹©ä½ çš„Ubuntuç‰ˆæœ¬,æµè§ˆpool/stable/,é€‰æ‹©amd64,armhf,arm64,ppc64el,æˆ–s390x,å¹¶ä¸‹è½½.debæ–‡ä»¶å¯¹äºdockerå¼•æ“ã€‚</p> <div class="custom-block tip"><p class="custom-block-title">æ³¨æ„</p> <p>è¦å®‰è£…å¤œé—´ è½¯ä»¶åŒ…,stableè¯·å°†URLä¸­çš„å•è¯æ›´æ”¹ ä¸ºnightlyã€‚ äº†è§£æ¯æ™šå’Œæµ‹è¯•é¢‘é“ã€‚</p></div></li> <li><p>å®‰è£…Docker Engine-Community,å°†ä¸‹é¢çš„è·¯å¾„æ›´æ”¹ä¸ºæ‚¨ä¸‹è½½Dockerè½¯ä»¶åŒ…çš„è·¯å¾„ã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">\</span>$ <span class="token function">sudo</span> dpkg -i /path/to/package.deb
</code></pre></div><p>Dockerå®ˆæŠ¤ç¨‹åºä¼šè‡ªåŠ¨å¯åŠ¨ã€‚</p></li> <li><p>é€šè¿‡è¿è¡Œhello-world æ˜ åƒæ¥éªŒè¯æ˜¯å¦æ­£ç¡®å®‰è£…äº†Docker Engine-Community ã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">\</span>$ <span class="token function">sudo</span> docker run hello-world
</code></pre></div><p>æ­¤å‘½ä»¤ä¸‹è½½æµ‹è¯•å›¾åƒå¹¶åœ¨å®¹å™¨ä¸­è¿è¡Œã€‚å®¹å™¨è¿è¡Œæ—¶,å®ƒä¼šæ‰“å°å‚è€ƒæ¶ˆæ¯å¹¶é€€å‡ºã€‚</p></li></ol> <h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="header-anchor">#</a> æ¦‚å¿µ</h2> <h3 id="é•œåƒ"><a href="#é•œåƒ" class="header-anchor">#</a> é•œåƒ</h3> <h4 id="ä»‹ç»"><a href="#ä»‹ç»" class="header-anchor">#</a> ä»‹ç»</h4> <p>åœ¨ Docker çš„æœ¯è¯­é‡Œï¼Œä¸€ä¸ªåªè¯»å±‚è¢«ç§°ä¸ºé•œåƒï¼Œä¸€ä¸ªé•œåƒæ˜¯æ°¸ä¹…ä¸ä¼šå˜çš„ã€‚</p> <p>ç”±äº Docker ä½¿ç”¨ä¸€ä¸ªç»Ÿä¸€æ–‡ä»¶ç³»ç»Ÿï¼ŒDocker è¿›ç¨‹è®¤ä¸ºæ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿæ˜¯ä»¥è¯»å†™æ–¹å¼æŒ‚è½½çš„ã€‚ ä½†æ˜¯æ‰€æœ‰çš„å˜æ›´éƒ½å‘ç”Ÿé¡¶å±‚çš„å¯å†™å±‚ï¼Œè€Œä¸‹å±‚çš„åŸå§‹çš„åªè¯»é•œåƒæ–‡ä»¶å¹¶æœªå˜åŒ–ã€‚ç”±äºé•œåƒä¸ å¯å†™ï¼Œæ‰€ä»¥é•œåƒæ˜¯æ— çŠ¶æ€çš„ã€‚</p> <h5 id="çˆ¶é•œåƒ"><a href="#çˆ¶é•œåƒ" class="header-anchor">#</a> çˆ¶é•œåƒ</h5> <p>æ¯ä¸€ä¸ªé•œåƒéƒ½å¯èƒ½ä¾èµ–äºç”±ä¸€ä¸ªæˆ–å¤šä¸ªä¸‹å±‚çš„ç»„æˆçš„å¦ä¸€ä¸ªé•œåƒã€‚æˆ‘ä»¬æœ‰æ—¶è¯´ï¼Œä¸‹å±‚é‚£ä¸ª é•œåƒæ˜¯ä¸Šå±‚é•œåƒçš„çˆ¶é•œåƒã€‚</p> <h5 id="åŸºç¡€é•œåƒ"><a href="#åŸºç¡€é•œåƒ" class="header-anchor">#</a> åŸºç¡€é•œåƒ</h5> <p>ä¸€ä¸ªæ²¡æœ‰ä»»ä½•çˆ¶é•œåƒçš„é•œåƒï¼Œè°“ä¹‹åŸºç¡€é•œåƒã€‚</p> <h5 id="é•œåƒid"><a href="#é•œåƒid" class="header-anchor">#</a> é•œåƒID</h5> <p>æ‰€æœ‰é•œåƒéƒ½æ˜¯é€šè¿‡ä¸€ä¸ª 64 ä½åå…­è¿›åˆ¶å­—ç¬¦ä¸² ï¼ˆå†…éƒ¨æ˜¯ä¸€ä¸ª 256 bit çš„å€¼ï¼‰æ¥æ ‡è¯†çš„ã€‚ ä¸ºç®€åŒ–ä½¿ç”¨ï¼Œå‰ 12 ä¸ªå­—ç¬¦å¯ä»¥ç»„æˆä¸€ä¸ªçŸ­IDï¼Œå¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ã€‚çŸ­IDè¿˜æ˜¯æœ‰ä¸€å®šçš„ ç¢°æ’æœºç‡ï¼Œæ‰€ä»¥æœåŠ¡å™¨æ€»æ˜¯è¿”å›é•¿IDã€‚</p> <h4 id="è·å–é•œåƒ"><a href="#è·å–é•œåƒ" class="header-anchor">#</a> è·å–é•œåƒ</h4> <p>å¯ä»¥ä½¿ç”¨ docker pull å‘½ä»¤æ¥ä»ä»“åº“è·å–æ‰€éœ€è¦çš„é•œåƒã€‚</p> <p>ä¸‹é¢çš„ä¾‹å­å°†ä» Docker Hub ä»“åº“ä¸‹è½½ä¸€ä¸ª Ubuntu 12.04 æ“ä½œç³»ç»Ÿçš„é•œåƒã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">sudo</span> docker pull ubuntu:12.04
Pulling repository ubuntu
ab8e2728644c: Pulling dependent layers
511136ea3c5a: Download complete
5f0ffaa9455e: Download complete
a300658979be: Download complete
904483ae0c30: Download complete
ffdaafd1ca50: Download complete
d047ae21eeaf: Download complete
</code></pre></div><p>ä¸‹è½½è¿‡ç¨‹ä¸­ï¼Œä¼šè¾“å‡ºè·å–é•œåƒçš„æ¯ä¸€å±‚ä¿¡æ¯ã€‚</p> <p>è¯¥å‘½ä»¤å®é™…ä¸Šç›¸å½“äº<code>$ sudo docker pull registry.hub.docker.com/ubuntu:12.04</code>å‘½ä»¤ï¼Œå³ä»æ³¨å†ŒæœåŠ¡å™¨registry.hub.docker.com ä¸­çš„ ubuntu ä»“åº“æ¥ä¸‹è½½æ ‡è®°ä¸º 12.04 çš„é•œåƒã€‚</p> <p>æœ‰æ—¶å€™å®˜æ–¹ä»“åº“æ³¨å†ŒæœåŠ¡å™¨ä¸‹è½½è¾ƒæ…¢ï¼Œå¯ä»¥ä»å…¶ä»–ä»“åº“ä¸‹è½½ã€‚ ä»å…¶å®ƒä»“åº“ä¸‹è½½æ—¶éœ€è¦æŒ‡å®šå®Œæ•´çš„ä»“åº“æ³¨å†ŒæœåŠ¡å™¨åœ°å€ã€‚ä¾‹å¦‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">sudo</span> docker pull dl.dockerpool.com:5000/ubuntu:12.04
Pulling dl.dockerpool.com:5000/ubuntu
ab8e2728644c: Pulling dependent layers
511136ea3c5a: Download complete
5f0ffaa9455e: Download complete
a300658979be: Download complete
904483ae0c30: Download complete
ffdaafd1ca50: Download complete
d047ae21eeaf: Download complete
</code></pre></div><p>å®Œæˆåï¼Œå³å¯éšæ—¶ä½¿ç”¨è¯¥é•œåƒäº†ï¼Œä¾‹å¦‚åˆ›å»ºä¸€ä¸ªå®¹å™¨ï¼Œè®©å…¶ä¸­è¿è¡Œ bash åº”ç”¨ã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">sudo</span> docker run -t -i ubuntu:12.04 /bin/bash
root@fe7fc4bd8fc9:/<span class="token comment">#</span>
</code></pre></div><h4 id="åˆ—å‡ºæœ¬åœ°é•œåƒ"><a href="#åˆ—å‡ºæœ¬åœ°é•œåƒ" class="header-anchor">#</a> åˆ—å‡ºæœ¬åœ°é•œåƒ</h4> <p>ä½¿ç”¨ docker images æ˜¾ç¤ºæœ¬åœ°å·²æœ‰çš„é•œåƒã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">sudo</span> docker images
REPOSITORY       TAG      IMAGE ID      CREATED      VIRTUAL SIZE
ubuntu           <span class="token number">12.04</span>    74fe38d11401  <span class="token number">4</span> weeks ago  <span class="token number">209.6</span> MB
ubuntu           precise  74fe38d11401  <span class="token number">4</span> weeks ago  <span class="token number">209.6</span> MB
ubuntu           <span class="token number">14.04</span>    99ec81b80c55  <span class="token number">4</span> weeks ago  <span class="token number">266</span> MB
ubuntu           latest   99ec81b80c55  <span class="token number">4</span> weeks ago  <span class="token number">266</span> MB
ubuntu           trusty   99ec81b80c55  <span class="token number">4</span> weeks ago  <span class="token number">266</span> MB
<span class="token punctuation">..</span>.
</code></pre></div><p>åœ¨åˆ—å‡ºä¿¡æ¯ä¸­ï¼Œå¯ä»¥çœ‹åˆ°å‡ ä¸ªå­—æ®µä¿¡æ¯</p> <ul><li>æ¥è‡ªäºå“ªä¸ªä»“åº“ï¼Œæ¯”å¦‚ ubuntu</li> <li>é•œåƒçš„æ ‡è®°ï¼Œæ¯”å¦‚ 14.04</li> <li>å®ƒçš„ ID å·ï¼ˆå”¯ä¸€ï¼‰</li> <li>åˆ›å»ºæ—¶é—´</li> <li>é•œåƒå¤§å°</li></ul> <p>å…¶ä¸­é•œåƒçš„ ID å”¯ä¸€æ ‡è¯†äº†é•œåƒï¼Œæ³¨æ„åˆ° ubuntu:14.04 å’Œ ubuntu:trusty å…·æœ‰ç›¸åŒçš„é•œåƒ IDï¼Œè¯´æ˜å®ƒä»¬å®é™…ä¸Šæ˜¯åŒä¸€é•œåƒã€‚</p> <p>TAG ä¿¡æ¯ç”¨æ¥æ ‡è®°æ¥è‡ªåŒä¸€ä¸ªä»“åº“çš„ä¸åŒé•œåƒã€‚ä¾‹å¦‚ ubuntu ä»“åº“ä¸­æœ‰å¤šä¸ªé•œåƒï¼Œé€šè¿‡ TAG ä¿¡æ¯æ¥åŒºåˆ†å‘è¡Œç‰ˆæœ¬ï¼Œä¾‹å¦‚ 10.04ã€12.04ã€12.10ã€13.04ã€14.04 ç­‰ã€‚ä¾‹å¦‚ä¸‹é¢çš„å‘½ä»¤æŒ‡å®šä½¿ç”¨é•œåƒ ubuntu:14.04 æ¥å¯åŠ¨ä¸€ä¸ªå®¹å™¨ã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">\</span>$ <span class="token function">sudo</span> docker run -t -i ubuntu:14.04 /bin/bash
</code></pre></div><p>å¦‚æœä¸æŒ‡å®šå…·ä½“çš„æ ‡è®°ï¼Œåˆ™é»˜è®¤ä½¿ç”¨ latest æ ‡è®°ä¿¡æ¯ã€‚</p> <h4 id="åˆ›å»ºé•œåƒ"><a href="#åˆ›å»ºé•œåƒ" class="header-anchor">#</a> åˆ›å»ºé•œåƒ</h4> <p>åˆ›å»ºé•œåƒæœ‰å¾ˆå¤šæ–¹æ³•ï¼Œç”¨æˆ·å¯ä»¥ä» Docker Hub è·å–å·²æœ‰é•œåƒå¹¶æ›´æ–°ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿåˆ›å»ºä¸€ä¸ªã€‚</p> <h5 id="ä¿®æ”¹å·²æœ‰é•œåƒ"><a href="#ä¿®æ”¹å·²æœ‰é•œåƒ" class="header-anchor">#</a> ä¿®æ”¹å·²æœ‰é•œåƒ</h5> <p>å…ˆä½¿ç”¨ä¸‹è½½çš„é•œåƒå¯åŠ¨å®¹å™¨ã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">sudo</span> docker run -t -i training/sinatra /bin/bash
root@0b2616b0e5a8:/<span class="token comment">#</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">æ³¨æ„</p> <p>è®°ä½å®¹å™¨çš„ IDï¼Œç¨åè¿˜ä¼šç”¨åˆ°ã€‚</p></div> <p>åœ¨å®¹å™¨ä¸­æ·»åŠ  json å’Œ gem ä¸¤ä¸ªåº”ç”¨ã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code>root@0b2616b0e5a8:/<span class="token comment"># gem install json</span>
</code></pre></div><p>å½“ç»“æŸåï¼Œæˆ‘ä»¬ä½¿ç”¨ exit æ¥é€€å‡ºï¼Œç°åœ¨æˆ‘ä»¬çš„å®¹å™¨å·²ç»è¢«æˆ‘ä»¬æ”¹å˜äº†ï¼Œä½¿ç”¨ docker commit å‘½ä»¤æ¥æäº¤æ›´æ–°åçš„å‰¯æœ¬ã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">sudo</span> docker commit -m <span class="token string">&quot;Added json gem&quot;</span> -a <span class="token string">&quot;Docker Newbee&quot;</span> 0b2616b0e5a8 ouruser/sinatra:v2
4f177bd27a9ff0f6dc2a830403925b5360bfe0b93d476f7fc3231110e7f71b1c
</code></pre></div><p>å…¶ä¸­ï¼Œ-m æ¥æŒ‡å®šæäº¤çš„è¯´æ˜ä¿¡æ¯ï¼Œè·Ÿæˆ‘ä»¬ä½¿ç”¨çš„ç‰ˆæœ¬æ§åˆ¶å·¥å…·ä¸€æ ·ï¼›-a å¯ä»¥æŒ‡å®šæ›´æ–°çš„ç”¨æˆ·ä¿¡æ¯ï¼›ä¹‹åæ˜¯ç”¨æ¥åˆ›å»ºé•œåƒçš„å®¹å™¨çš„ IDï¼›æœ€åæŒ‡å®šç›®æ ‡é•œåƒçš„ä»“åº“åå’Œ tag ä¿¡æ¯ã€‚åˆ›å»ºæˆåŠŸåä¼šè¿”å›è¿™ä¸ªé•œåƒçš„ ID ä¿¡æ¯ã€‚</p> <p>ä½¿ç”¨ docker images æ¥æŸ¥çœ‹æ–°åˆ›å»ºçš„é•œåƒã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">sudo</span> docker images
REPOSITORY          TAG     IMAGE ID       CREATED       VIRTUAL SIZE
training/sinatra    latest  5bc342fa0b91   <span class="token number">10</span> hours ago  <span class="token number">446.7</span> MB
ouruser/sinatra     v2      3c59e02ddd1a   <span class="token number">10</span> hours ago  <span class="token number">446.7</span> MB
ouruser/sinatra     latest  5db5f8471261   <span class="token number">10</span> hours ago  <span class="token number">446.7</span> MB
</code></pre></div><p>ä¹‹åï¼Œå¯ä»¥ä½¿ç”¨æ–°çš„é•œåƒæ¥å¯åŠ¨å®¹å™¨</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">sudo</span> docker run -t -i ouruser/sinatra:v2 /bin/bash
root@78e82f680994:/<span class="token comment">#</span>
</code></pre></div><h5 id="åˆ©ç”¨-dockerfile-æ¥åˆ›å»ºé•œåƒ"><a href="#åˆ©ç”¨-dockerfile-æ¥åˆ›å»ºé•œåƒ" class="header-anchor">#</a> åˆ©ç”¨ Dockerfile æ¥åˆ›å»ºé•œåƒ</h5> <p>ä½¿ç”¨ docker commit æ¥æ‰©å±•ä¸€ä¸ªé•œåƒæ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯ä¸æ–¹ä¾¿åœ¨ä¸€ä¸ªå›¢é˜Ÿä¸­åˆ†äº«ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ docker buildæ¥åˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒã€‚ä¸ºæ­¤ï¼Œé¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ª Dockerfileï¼ŒåŒ…å«ä¸€äº›å¦‚ä½•åˆ›å»ºé•œåƒçš„æŒ‡ä»¤ã€‚</p> <p>æ–°å»ºä¸€ä¸ªç›®å½•å’Œä¸€ä¸ª Dockerfile</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">\</span>$ <span class="token function">mkdir</span> sinatra
<span class="token punctuation">\</span>$ <span class="token builtin class-name">cd</span> sinatra
<span class="token punctuation">\</span>$ <span class="token function">touch</span> Dockerfile
</code></pre></div><p>Dockerfile ä¸­æ¯ä¸€æ¡æŒ‡ä»¤éƒ½åˆ›å»ºé•œåƒçš„ä¸€å±‚ï¼Œä¾‹å¦‚ï¼š</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># This is a comment</span>
FROM ubuntu:14.04
MAINTAINER Docker Newbee <span class="token operator">&lt;</span>newbee@docker.com<span class="token operator">&gt;</span>
RUN <span class="token function">apt-get</span> -qq update
RUN <span class="token function">apt-get</span> -qqy <span class="token function">install</span> ruby ruby-dev
RUN gem <span class="token function">install</span> sinatra
</code></pre></div><p>Dockerfile åŸºæœ¬çš„è¯­æ³•æ˜¯</p> <ul><li>ä½¿ç”¨#æ¥æ³¨é‡Š</li> <li>FROM æŒ‡ä»¤å‘Šè¯‰ Docker ä½¿ç”¨å“ªä¸ªé•œåƒä½œä¸ºåŸºç¡€</li> <li>æ¥ç€æ˜¯ç»´æŠ¤è€…çš„ä¿¡æ¯</li> <li>RUNå¼€å¤´çš„æŒ‡ä»¤ä¼šåœ¨åˆ›å»ºä¸­è¿è¡Œï¼Œæ¯”å¦‚å®‰è£…ä¸€ä¸ªè½¯ä»¶åŒ…ï¼Œåœ¨è¿™é‡Œä½¿ç”¨ apt-get æ¥å®‰è£…äº†ä¸€äº›è½¯ä»¶</li></ul> <p>ç¼–å†™å®Œæˆ Dockerfile åå¯ä»¥ä½¿ç”¨ docker build æ¥ç”Ÿæˆé•œåƒã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">sudo</span> docker build -t<span class="token operator">=</span><span class="token string">&quot;ouruser/sinatra:v2&quot;</span> <span class="token builtin class-name">.</span>
Uploading context  <span class="token number">2.56</span> kB
Uploading context
Step <span class="token number">0</span> <span class="token builtin class-name">:</span> FROM ubuntu:14.04
---<span class="token operator">&gt;</span> 99ec81b80c55
Step <span class="token number">1</span> <span class="token builtin class-name">:</span> MAINTAINER Newbee <span class="token operator">&lt;</span>newbee@docker.com<span class="token operator">&gt;</span>
---<span class="token operator">&gt;</span> Running <span class="token keyword">in</span> 7c5664a8a0c1
---<span class="token operator">&gt;</span> 2fa8ca4e2a13
Removing intermediate container 7c5664a8a0c1
Step <span class="token number">2</span> <span class="token builtin class-name">:</span> RUN <span class="token function">apt-get</span> -qq update
---<span class="token operator">&gt;</span> Running <span class="token keyword">in</span> b07cc3fb4256
---<span class="token operator">&gt;</span> 50d21070ec0c
Removing intermediate container b07cc3fb4256
Step <span class="token number">3</span> <span class="token builtin class-name">:</span> RUN <span class="token function">apt-get</span> -qqy <span class="token function">install</span> ruby ruby-dev
---<span class="token operator">&gt;</span> Running <span class="token keyword">in</span> a5b038dd127e
Selecting previously unselected package libasan0:amd64.
<span class="token punctuation">(</span>Reading database <span class="token punctuation">..</span>. <span class="token number">11518</span> files and directories currently installed.<span class="token punctuation">)</span>
Preparing to unpack <span class="token punctuation">..</span>./libasan0_4.8.2-19ubuntu1_amd64.deb <span class="token punctuation">..</span>.
Setting up ruby <span class="token punctuation">(</span><span class="token number">1</span>:1.9.3.4<span class="token punctuation">)</span> <span class="token punctuation">..</span>.
Setting up ruby1.9.1 <span class="token punctuation">(</span><span class="token number">1.9</span>.3.484-2ubuntu1<span class="token punctuation">)</span> <span class="token punctuation">..</span>.
Processing triggers <span class="token keyword">for</span> libc-bin <span class="token punctuation">(</span><span class="token number">2.19</span>-0ubuntu6<span class="token punctuation">)</span> <span class="token punctuation">..</span>.
---<span class="token operator">&gt;</span> 2acb20f17878
Removing intermediate container a5b038dd127e
Step <span class="token number">4</span> <span class="token builtin class-name">:</span> RUN gem <span class="token function">install</span> sinatra
---<span class="token operator">&gt;</span> Running <span class="token keyword">in</span> 5e9d0065c1f7
<span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span>
Successfully installed rack-protection-1.5.3
Successfully installed sinatra-1.4.5
<span class="token number">4</span> gems installed
---<span class="token operator">&gt;</span> 324104cde6ad
Removing intermediate container 5e9d0065c1f7
Successfully built 324104cde6ad
</code></pre></div><p>å…¶ä¸­ -t æ ‡è®°æ¥æ·»åŠ  tagï¼ŒæŒ‡å®šæ–°çš„é•œåƒçš„ç”¨æˆ·ä¿¡æ¯ã€‚ â€œ.â€ æ˜¯ Dockerfile æ‰€åœ¨çš„è·¯å¾„ï¼ˆå½“å‰ç›®å½•ï¼‰ï¼Œä¹Ÿå¯ä»¥æ›¿æ¢ä¸ºä¸€ä¸ªå…·ä½“çš„ Dockerfile çš„è·¯å¾„ã€‚</p> <p>å¯ä»¥çœ‹åˆ° build è¿›ç¨‹åœ¨æ‰§è¡Œæ“ä½œã€‚å®ƒè¦åšçš„ç¬¬ä¸€ä»¶äº‹æƒ…å°±æ˜¯ä¸Šä¼ è¿™ä¸ª Dockerfile å†…å®¹ï¼Œå› ä¸ºæ‰€æœ‰çš„æ“ä½œéƒ½è¦ä¾æ® Dockerfile æ¥è¿›è¡Œã€‚ ç„¶åï¼ŒDockfile ä¸­çš„æŒ‡ä»¤è¢«ä¸€æ¡ä¸€æ¡çš„æ‰§è¡Œã€‚æ¯ä¸€æ­¥éƒ½åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å®¹å™¨ï¼Œåœ¨å®¹å™¨ä¸­æ‰§è¡ŒæŒ‡ä»¤å¹¶æäº¤ä¿®æ”¹ï¼ˆå°±è·Ÿä¹‹å‰ä»‹ç»è¿‡çš„ docker commit ä¸€æ ·ï¼‰ã€‚å½“æ‰€æœ‰çš„æŒ‡ä»¤éƒ½æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œè¿”å›äº†æœ€ç»ˆçš„é•œåƒ idã€‚æ‰€æœ‰çš„ä¸­é—´æ­¥éª¤æ‰€äº§ç”Ÿçš„å®¹å™¨éƒ½è¢«åˆ é™¤å’Œæ¸…ç†äº†ã€‚</p> <div class="custom-block tip"><p class="custom-block-title">æ³¨æ„</p> <p>ä¸€ä¸ªé•œåƒä¸èƒ½è¶…è¿‡ 127 å±‚</p></div> <p>æ­¤å¤–ï¼Œè¿˜å¯ä»¥åˆ©ç”¨ ADD å‘½ä»¤å¤åˆ¶æœ¬åœ°æ–‡ä»¶åˆ°é•œåƒï¼›ç”¨ EXPOSE å‘½ä»¤æ¥å‘å¤–éƒ¨å¼€æ”¾ç«¯å£ï¼›ç”¨ CMD å‘½ä»¤æ¥æè¿°å®¹å™¨å¯åŠ¨åè¿è¡Œçš„ç¨‹åºç­‰ã€‚ä¾‹å¦‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># put my local web site in myApp folder to /var/www</span>
ADD myApp /var/www
<span class="token comment"># expose httpd port</span>
EXPOSE <span class="token number">80</span>
<span class="token comment"># the command to run</span>
CMD <span class="token punctuation">[</span><span class="token string">&quot;/usr/sbin/apachectl&quot;</span>, <span class="token string">&quot;-D&quot;</span>, <span class="token string">&quot;FOREGROUND&quot;</span><span class="token punctuation">]</span>
</code></pre></div><p>ç°åœ¨å¯ä»¥åˆ©ç”¨æ–°åˆ›å»ºçš„é•œåƒæ¥å¯åŠ¨ä¸€ä¸ªå®¹å™¨ã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">sudo</span> docker run -t -i ouruser/sinatra:v2 /bin/bash
root@8196968dac35:/<span class="token comment">#</span>
</code></pre></div><p>è¿˜å¯ä»¥ç”¨ docker tag å‘½ä»¤æ¥ä¿®æ”¹é•œåƒçš„æ ‡ç­¾ã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">\</span>$ <span class="token function">sudo</span> docker tag 5db5f8471261 ouruser/sinatra:devel
$ <span class="token function">sudo</span> docker images ouruser/sinatra
REPOSITORY          TAG     IMAGE ID      CREATED        VIRTUAL SIZE
ouruser/sinatra     latest  5db5f8471261  <span class="token number">11</span> hours ago   <span class="token number">446.7</span> MB
ouruser/sinatra     devel   5db5f8471261  <span class="token number">11</span> hours ago   <span class="token number">446.7</span> MB
ouruser/sinatra     v2      5db5f8471261  <span class="token number">11</span> hours ago   <span class="token number">446.7</span> MB
</code></pre></div><h5 id="ä»æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿå¯¼å…¥"><a href="#ä»æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿå¯¼å…¥" class="header-anchor">#</a> ä»æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿå¯¼å…¥</h5> <p>è¦ä»æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿå¯¼å…¥ä¸€ä¸ªé•œåƒï¼Œå¯ä»¥ä½¿ç”¨ openvzï¼ˆå®¹å™¨è™šæ‹ŸåŒ–çš„å…ˆé”‹æŠ€æœ¯ï¼‰çš„æ¨¡æ¿æ¥åˆ›å»ºï¼š openvz çš„æ¨¡æ¿ä¸‹è½½åœ°å€ä¸º templates ã€‚</p> <p>æ¯”å¦‚ï¼Œå…ˆä¸‹è½½äº†ä¸€ä¸ª ubuntu-14.04 çš„é•œåƒï¼Œä¹‹åä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯¼å…¥ï¼š</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sudo</span> <span class="token function">cat</span> ubuntu-14.04-x86_64-minimal.tar.gz  <span class="token operator">|</span>docker <span class="token function">import</span> - ubuntu:14.04
</code></pre></div><p>ç„¶åæŸ¥çœ‹æ–°å¯¼å…¥çš„é•œåƒã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code>docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             VIRTUAL SIZE
ubuntu              <span class="token number">14.04</span>               05ac7c0b9383        <span class="token number">17</span> seconds ago      <span class="token number">215.5</span> MB
</code></pre></div><h5 id="ä¸Šä¼ é•œåƒ"><a href="#ä¸Šä¼ é•œåƒ" class="header-anchor">#</a> ä¸Šä¼ é•œåƒ</h5> <p>ç”¨æˆ·å¯ä»¥é€šè¿‡ docker push å‘½ä»¤ï¼ŒæŠŠè‡ªå·±åˆ›å»ºçš„é•œåƒä¸Šä¼ åˆ°ä»“åº“ä¸­æ¥å…±äº«ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·åœ¨ Docker Hub ä¸Šå®Œæˆæ³¨å†Œåï¼Œå¯ä»¥æ¨é€è‡ªå·±çš„é•œåƒåˆ°ä»“åº“ä¸­ã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">\</span>$ <span class="token function">sudo</span> docker push ouruser/sinatra
The push refers to a repository <span class="token punctuation">[</span>ouruser/sinatra<span class="token punctuation">]</span> <span class="token punctuation">(</span>len: <span class="token number">1</span><span class="token punctuation">)</span>
Sending image list
Pushing repository ouruser/sinatra <span class="token punctuation">(</span><span class="token number">3</span> tags<span class="token punctuation">)</span>
</code></pre></div><h4 id="å­˜å‡ºå’Œè½½å…¥é•œåƒ"><a href="#å­˜å‡ºå’Œè½½å…¥é•œåƒ" class="header-anchor">#</a> å­˜å‡ºå’Œè½½å…¥é•œåƒ</h4> <h5 id="å­˜å‡ºé•œåƒ"><a href="#å­˜å‡ºé•œåƒ" class="header-anchor">#</a> å­˜å‡ºé•œåƒ</h5> <p>å¦‚æœè¦å¯¼å‡ºé•œåƒåˆ°æœ¬åœ°æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ docker save å‘½ä»¤ã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">\</span>$ <span class="token function">sudo</span> docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             VIRTUAL SIZE
ubuntu              <span class="token number">14.04</span>               c4ff7513909d        <span class="token number">5</span> weeks ago         <span class="token number">225.4</span> MB
<span class="token punctuation">..</span>.
<span class="token punctuation">\</span><span class="token variable">$sudo</span> docker save -o ubuntu_14.04.tar ubuntu:14.04
</code></pre></div><h5 id="è½½å…¥é•œåƒ"><a href="#è½½å…¥é•œåƒ" class="header-anchor">#</a> è½½å…¥é•œåƒ</h5> <p>å¯ä»¥ä½¿ç”¨ docker load ä»å¯¼å‡ºçš„æœ¬åœ°æ–‡ä»¶ä¸­å†å¯¼å…¥åˆ°æœ¬åœ°é•œåƒåº“ï¼Œä¾‹å¦‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">\</span>$ <span class="token function">sudo</span> docker load --input ubuntu_14.04.tar
æˆ–
<span class="token punctuation">\</span>$ <span class="token function">sudo</span> docker load <span class="token operator">&lt;</span> ubuntu_14.04.tar
</code></pre></div><p>è¿™å°†å¯¼å…¥é•œåƒä»¥åŠå…¶ç›¸å…³çš„å…ƒæ•°æ®ä¿¡æ¯ï¼ˆåŒ…æ‹¬æ ‡ç­¾ç­‰ï¼‰ã€‚</p> <h4 id="ç§»é™¤æœ¬åœ°é•œåƒ"><a href="#ç§»é™¤æœ¬åœ°é•œåƒ" class="header-anchor">#</a> ç§»é™¤æœ¬åœ°é•œåƒ</h4> <p>å¦‚æœè¦ç§»é™¤æœ¬åœ°çš„é•œåƒï¼Œå¯ä»¥ä½¿ç”¨ docker rmi å‘½ä»¤ã€‚æ³¨æ„ docker rm å‘½ä»¤æ˜¯ç§»é™¤å®¹å™¨ã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">sudo</span> docker rmi training/sinatra
Untagged: training/sinatra:latest
Deleted: 5bc342fa0b91cabf65246837015197eecfa24b2213ed6a51a8974ae250fedd8d
Deleted: ed0fffdcdae5eb2c3a55549857a8be7fc8bc4241fb19ad714364cbfd7a56b22f
Deleted: 5c58979d73ae448df5af1d8142436d81116187a7633082650549c52c3a2418f0
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">æ³¨æ„</p> <p>åœ¨åˆ é™¤é•œåƒä¹‹å‰è¦å…ˆç”¨ docker rm åˆ æ‰ä¾èµ–äºè¿™ä¸ªé•œåƒçš„æ‰€æœ‰å®¹å™¨ã€‚</p></div> <h4 id="é•œåƒçš„å®ç°åŸç†"><a href="#é•œåƒçš„å®ç°åŸç†" class="header-anchor">#</a> é•œåƒçš„å®ç°åŸç†</h4> <p>Docker é•œåƒæ˜¯æ€ä¹ˆå®ç°å¢é‡çš„ä¿®æ”¹å’Œç»´æŠ¤çš„ï¼Ÿ æ¯ä¸ªé•œåƒéƒ½ç”±å¾ˆå¤šå±‚æ¬¡æ„æˆï¼ŒDocker ä½¿ç”¨ Union FS å°†è¿™äº›ä¸åŒçš„å±‚ç»“åˆåˆ°ä¸€ä¸ªé•œåƒä¸­å»ã€‚</p> <p>é€šå¸¸ Union FS æœ‰ä¸¤ä¸ªç”¨é€”, ä¸€æ–¹é¢å¯ä»¥å®ç°ä¸å€ŸåŠ© LVMã€RAID å°†å¤šä¸ª disk æŒ‚åˆ°åŒä¸€ä¸ªç›®å½•ä¸‹,å¦ä¸€ä¸ªæ›´å¸¸ç”¨çš„å°±æ˜¯å°†ä¸€ä¸ªåªè¯»çš„åˆ†æ”¯å’Œä¸€ä¸ªå¯å†™çš„åˆ†æ”¯è”åˆåœ¨ä¸€èµ·ï¼ŒLive CD æ­£æ˜¯åŸºäºæ­¤æ–¹æ³•å¯ä»¥å…è®¸åœ¨é•œåƒä¸å˜çš„åŸºç¡€ä¸Šå…è®¸ç”¨æˆ·åœ¨å…¶ä¸Šè¿›è¡Œä¸€äº›å†™æ“ä½œã€‚ Docker åœ¨ AUFS ä¸Šæ„å»ºçš„å®¹å™¨ä¹Ÿæ˜¯åˆ©ç”¨äº†ç±»ä¼¼çš„åŸç†ã€‚</p> <h3 id="å®¹å™¨"><a href="#å®¹å™¨" class="header-anchor">#</a> å®¹å™¨</h3> <h4 id="åŸºæœ¬ç»“æ„"><a href="#åŸºæœ¬ç»“æ„" class="header-anchor">#</a> åŸºæœ¬ç»“æ„</h4> <p>Dockerfile ç”±ä¸€è¡Œè¡Œå‘½ä»¤è¯­å¥ç»„æˆï¼Œå¹¶ä¸”æ”¯æŒä»¥ # å¼€å¤´çš„æ³¨é‡Šè¡Œã€‚</p> <p>ä¸€èˆ¬çš„ï¼ŒDockerfile åˆ†ä¸ºå››éƒ¨åˆ†ï¼šåŸºç¡€é•œåƒä¿¡æ¯ã€ç»´æŠ¤è€…ä¿¡æ¯ã€é•œåƒæ“ä½œæŒ‡ä»¤å’Œå®¹å™¨å¯åŠ¨æ—¶æ‰§è¡ŒæŒ‡ä»¤ã€‚</p> <p>ä¾‹å¦‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># This dockerfile uses the ubuntu image</span>
<span class="token comment"># VERSION 2 - EDITION 1</span>
<span class="token comment"># Author: docker_user</span>
<span class="token comment"># Command format: Instruction [arguments / command] ..</span>

<span class="token comment"># Base image to use, this must be set as the first line</span>
FROM ubuntu

<span class="token comment"># Maintainer: docker_user &lt;docker_user at email.com&gt; (@docker_user)</span>
MAINTAINER docker_user docker_user@email.com

<span class="token comment"># Commands to update the image</span>
RUN <span class="token builtin class-name">echo</span> <span class="token string">&quot;deb http://archive.ubuntu.com/ubuntu/ raring main universe&quot;</span> <span class="token operator">&gt;&gt;</span> /etc/apt/sources.list
RUN <span class="token function">apt-get</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">apt-get</span> <span class="token function">install</span> -y nginx
RUN <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token entity" title="\n">\n</span>daemon off;&quot;</span> <span class="token operator">&gt;&gt;</span> /etc/nginx/nginx.conf

<span class="token comment"># Commands when creating a new container</span>
CMD /usr/sbin/nginx
</code></pre></div><p>å…¶ä¸­ï¼Œä¸€å¼€å§‹å¿…é¡»æŒ‡æ˜æ‰€åŸºäºçš„é•œåƒåç§°ï¼Œæ¥ä¸‹æ¥æ¨èè¯´æ˜ç»´æŠ¤è€…ä¿¡æ¯ã€‚</p> <p>åé¢åˆ™æ˜¯é•œåƒæ“ä½œæŒ‡ä»¤ï¼Œä¾‹å¦‚ RUN æŒ‡ä»¤ï¼ŒRUN æŒ‡ä»¤å°†å¯¹é•œåƒæ‰§è¡Œè·Ÿéšçš„å‘½ä»¤ã€‚æ¯è¿è¡Œä¸€æ¡ RUN æŒ‡ä»¤ï¼Œé•œåƒæ·»åŠ æ–°çš„ä¸€å±‚ï¼Œå¹¶æäº¤ã€‚</p> <p>æœ€åæ˜¯ CMD æŒ‡ä»¤ï¼Œæ¥æŒ‡å®šè¿è¡Œå®¹å™¨æ—¶çš„æ“ä½œå‘½ä»¤ã€‚</p> <p>ä¸‹é¢æ˜¯ä¸€ä¸ªæ›´å¤æ‚çš„ä¾‹å­</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># Nginx</span>
<span class="token comment">#</span>
<span class="token comment"># VERSION               0.0.1</span>

FROM      ubuntu
MAINTAINER Victor Vieux <span class="token operator">&lt;</span>victor@docker.com<span class="token operator">&gt;</span>

RUN <span class="token function">apt-get</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">apt-get</span> <span class="token function">install</span> -y inotify-tools nginx apache2 openssh-server

<span class="token comment"># Firefox over VNC</span>
<span class="token comment">#</span>
<span class="token comment"># VERSION               0.3</span>

FROM ubuntu

<span class="token comment"># Install vnc, xvfb in order to create a 'fake' display and firefox</span>
RUN <span class="token function">apt-get</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">apt-get</span> <span class="token function">install</span> -y x11vnc xvfb firefox
RUN <span class="token function">mkdir</span> /.vnc
<span class="token comment"># Setup a password</span>
RUN x11vnc -storepasswd <span class="token number">1234</span> ~/.vnc/passwd
<span class="token comment"># Autostart firefox (might not be the best way, but it does the trick)</span>
RUN <span class="token function">bash</span> -c <span class="token string">'echo &quot;firefox&quot; &gt;&gt; /.bashrc'</span>

EXPOSE <span class="token number">5900</span>
CMD    <span class="token punctuation">[</span><span class="token string">&quot;x11vnc&quot;</span>, <span class="token string">&quot;-forever&quot;</span>, <span class="token string">&quot;-usepw&quot;</span>, <span class="token string">&quot;-create&quot;</span><span class="token punctuation">]</span>

<span class="token comment"># Multiple images example</span>
<span class="token comment">#</span>
<span class="token comment"># VERSION               0.1</span>

FROM ubuntu
RUN <span class="token builtin class-name">echo</span> foo <span class="token operator">&gt;</span> bar
<span class="token comment"># Will output something like ===&gt; 907ad6c2736f</span>

FROM ubuntu
RUN <span class="token builtin class-name">echo</span> moo <span class="token operator">&gt;</span> oink
<span class="token comment"># Will output something like ===&gt; 695d7793cbe4</span>

<span class="token comment"># Youá¾¿ll now have two images, 907ad6c2736f with /bar, and 695d7793cbe4 with</span>
<span class="token comment"># /oink.</span>
</code></pre></div><h4 id="æŒ‡ä»¤"><a href="#æŒ‡ä»¤" class="header-anchor">#</a> æŒ‡ä»¤</h4> <p>æŒ‡ä»¤çš„ä¸€èˆ¬æ ¼å¼ä¸º INSTRUCTION argumentsï¼ŒæŒ‡ä»¤åŒ…æ‹¬ FROMã€MAINTAINERã€RUN ç­‰ã€‚</p> <h5 id="from"><a href="#from" class="header-anchor">#</a> FROM</h5> <p>æ ¼å¼ä¸º FROM &lt;image&gt;æˆ–FROM &lt;image&gt;:&lt;tag&gt;ã€‚</p> <p>ç¬¬ä¸€æ¡æŒ‡ä»¤å¿…é¡»ä¸º FROM æŒ‡ä»¤ã€‚å¹¶ä¸”ï¼Œå¦‚æœåœ¨åŒä¸€ä¸ªDockerfileä¸­åˆ›å»ºå¤šä¸ªé•œåƒæ—¶ï¼Œå¯ä»¥ä½¿ç”¨å¤šä¸ª FROM æŒ‡ä»¤ï¼ˆæ¯ä¸ªé•œåƒä¸€æ¬¡ï¼‰ã€‚</p> <h5 id="maintainer"><a href="#maintainer" class="header-anchor">#</a> MAINTAINER</h5> <p>æ ¼å¼ä¸º MAINTAINER &lt;name&gt;ï¼ŒæŒ‡å®šç»´æŠ¤è€…ä¿¡æ¯ã€‚</p> <h5 id="run"><a href="#run" class="header-anchor">#</a> RUN</h5> <p>æ ¼å¼ä¸º RUN &lt;command&gt; æˆ– RUN [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;]ã€‚</p> <p>å‰è€…å°†åœ¨ shell ç»ˆç«¯ä¸­è¿è¡Œå‘½ä»¤ï¼Œå³ /bin/sh -cï¼›åè€…åˆ™ä½¿ç”¨ exec æ‰§è¡Œã€‚æŒ‡å®šä½¿ç”¨å…¶å®ƒç»ˆç«¯å¯ä»¥é€šè¿‡ç¬¬äºŒç§æ–¹å¼å®ç°ï¼Œä¾‹å¦‚ RUN [&quot;/bin/bash&quot;, &quot;-c&quot;, &quot;echo hello&quot;]ã€‚</p> <p>æ¯æ¡ RUN æŒ‡ä»¤å°†åœ¨å½“å‰é•œåƒåŸºç¡€ä¸Šæ‰§è¡ŒæŒ‡å®šå‘½ä»¤ï¼Œå¹¶æäº¤ä¸ºæ–°çš„é•œåƒã€‚å½“å‘½ä»¤è¾ƒé•¿æ—¶å¯ä»¥ä½¿ç”¨ \ æ¥æ¢è¡Œã€‚</p> <h5 id="cmd"><a href="#cmd" class="header-anchor">#</a> CMD</h5> <p>æ”¯æŒä¸‰ç§æ ¼å¼</p> <div class="language-text extra-class"><pre class="language-text"><code>CMD [&quot;executable&quot;,&quot;param1&quot;,&quot;param2&quot;] ä½¿ç”¨ exec æ‰§è¡Œï¼Œæ¨èæ–¹å¼ï¼›
CMD command param1 param2 åœ¨ /bin/sh ä¸­æ‰§è¡Œï¼Œæä¾›ç»™éœ€è¦äº¤äº’çš„åº”ç”¨ï¼›
CMD [&quot;param1&quot;,&quot;param2&quot;] æä¾›ç»™ ENTRYPOINT çš„é»˜è®¤å‚æ•°ï¼›
</code></pre></div><p>æŒ‡å®šå¯åŠ¨å®¹å™¨æ—¶æ‰§è¡Œçš„å‘½ä»¤ï¼Œæ¯ä¸ª Dockerfile åªèƒ½æœ‰ä¸€æ¡ CMD å‘½ä»¤ã€‚å¦‚æœæŒ‡å®šäº†å¤šæ¡å‘½ä»¤ï¼Œåªæœ‰æœ€åä¸€æ¡ä¼šè¢«æ‰§è¡Œã€‚</p> <p>å¦‚æœç”¨æˆ·å¯åŠ¨å®¹å™¨æ—¶å€™æŒ‡å®šäº†è¿è¡Œçš„å‘½ä»¤ï¼Œåˆ™ä¼šè¦†ç›–æ‰ CMD æŒ‡å®šçš„å‘½ä»¤ã€‚</p> <h5 id="expose"><a href="#expose" class="header-anchor">#</a> EXPOSE</h5> <p>æ ¼å¼ä¸º EXPOSE &lt;port&gt; [&lt;port&gt;...]ã€‚</p> <p>å‘Šè¯‰ Docker æœåŠ¡ç«¯å®¹å™¨æš´éœ²çš„ç«¯å£å·ï¼Œä¾›äº’è”ç³»ç»Ÿä½¿ç”¨ã€‚åœ¨å¯åŠ¨å®¹å™¨æ—¶éœ€è¦é€šè¿‡ -Pï¼ŒDocker ä¸»æœºä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ªç«¯å£è½¬å‘åˆ°æŒ‡å®šçš„ç«¯å£ã€‚</p> <h5 id="env"><a href="#env" class="header-anchor">#</a> ENV</h5> <p>æ ¼å¼ä¸º ENV &lt;key&gt; &lt;value&gt;ã€‚ æŒ‡å®šä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œä¼šè¢«åç»­ RUN æŒ‡ä»¤ä½¿ç”¨ï¼Œå¹¶åœ¨å®¹å™¨è¿è¡Œæ—¶ä¿æŒã€‚</p> <p>ä¾‹å¦‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code>ENV PG_MAJOR <span class="token number">9.3</span>
ENV PG_VERSION <span class="token number">9.3</span>.4
RUN <span class="token function">curl</span> -SL http://example.com/postgres-<span class="token variable">$PG_VERSION</span>.tar.xz <span class="token operator">|</span> <span class="token function">tar</span> -xJC /usr/src/postgress <span class="token operator">&amp;&amp;</span> â€¦
ENV <span class="token environment constant">PATH</span> /usr/local/postgres-<span class="token variable">$PG_MAJOR</span>/bin:<span class="token environment constant">$PATH</span>
</code></pre></div><h5 id="add"><a href="#add" class="header-anchor">#</a> ADD</h5> <p>æ ¼å¼ä¸º ADD &lt;src&gt; &lt;dest&gt;ã€‚</p> <p>è¯¥å‘½ä»¤å°†å¤åˆ¶æŒ‡å®šçš„ &lt;src&gt; åˆ°å®¹å™¨ä¸­çš„ &lt;dest&gt;ã€‚ å…¶ä¸­ &lt;src&gt; å¯ä»¥æ˜¯Dockerfileæ‰€åœ¨ç›®å½•çš„ä¸€ä¸ªç›¸å¯¹è·¯å¾„ï¼›ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª URLï¼›è¿˜å¯ä»¥æ˜¯ä¸€ä¸ª tar æ–‡ä»¶ï¼ˆè‡ªåŠ¨è§£å‹ä¸ºç›®å½•ï¼‰ã€‚</p> <h5 id="copy"><a href="#copy" class="header-anchor">#</a> COPY</h5> <p>æ ¼å¼ä¸º COPY &lt;src&gt; &lt;dest&gt;ã€‚</p> <p>å¤åˆ¶æœ¬åœ°ä¸»æœºçš„ &lt;src&gt;ï¼ˆä¸º Dockerfile æ‰€åœ¨ç›®å½•çš„ç›¸å¯¹è·¯å¾„ï¼‰åˆ°å®¹å™¨ä¸­çš„ &lt;dest&gt;ã€‚</p> <p>å½“ä½¿ç”¨æœ¬åœ°ç›®å½•ä¸ºæºç›®å½•æ—¶ï¼Œæ¨èä½¿ç”¨ COPYã€‚
ENTRYPOINT</p> <p>ä¸¤ç§æ ¼å¼ï¼š</p> <div class="language-text extra-class"><pre class="language-text"><code>ENTRYPOINT [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;]
ENTRYPOINT command param1 param2ï¼ˆshellä¸­æ‰§è¡Œï¼‰ã€‚
</code></pre></div><p>é…ç½®å®¹å™¨å¯åŠ¨åæ‰§è¡Œçš„å‘½ä»¤ï¼Œå¹¶ä¸”ä¸å¯è¢« docker run æä¾›çš„å‚æ•°è¦†ç›–ã€‚</p> <p>æ¯ä¸ª Dockerfile ä¸­åªèƒ½æœ‰ä¸€ä¸ª ENTRYPOINTï¼Œå½“æŒ‡å®šå¤šä¸ªæ—¶ï¼Œåªæœ‰æœ€åä¸€ä¸ªèµ·æ•ˆã€‚</p> <h5 id="volume"><a href="#volume" class="header-anchor">#</a> VOLUME</h5> <p>æ ¼å¼ä¸º VOLUME [&quot;/data&quot;]ã€‚</p> <p>åˆ›å»ºä¸€ä¸ªå¯ä»¥ä»æœ¬åœ°ä¸»æœºæˆ–å…¶ä»–å®¹å™¨æŒ‚è½½çš„æŒ‚è½½ç‚¹ï¼Œä¸€èˆ¬ç”¨æ¥å­˜æ”¾æ•°æ®åº“å’Œéœ€è¦ä¿æŒçš„æ•°æ®ç­‰ã€‚</p> <h5 id="user"><a href="#user" class="header-anchor">#</a> USER</h5> <p>æ ¼å¼ä¸º USER daemonã€‚</p> <p>æŒ‡å®šè¿è¡Œå®¹å™¨æ—¶çš„ç”¨æˆ·åæˆ– UIDï¼Œåç»­çš„ RUN ä¹Ÿä¼šä½¿ç”¨æŒ‡å®šç”¨æˆ·ã€‚</p> <p>å½“æœåŠ¡ä¸éœ€è¦ç®¡ç†å‘˜æƒé™æ—¶ï¼Œå¯ä»¥é€šè¿‡è¯¥å‘½ä»¤æŒ‡å®šè¿è¡Œç”¨æˆ·ã€‚å¹¶ä¸”å¯ä»¥åœ¨ä¹‹å‰åˆ›å»ºæ‰€éœ€è¦çš„ç”¨æˆ·ï¼Œä¾‹å¦‚ï¼šRUN groupadd -r postgres &amp;&amp; useradd -r -g postgres postgresã€‚è¦ä¸´æ—¶è·å–ç®¡ç†å‘˜æƒé™å¯ä»¥ä½¿ç”¨ gosuï¼Œè€Œä¸æ¨è sudoã€‚</p> <h5 id="workdir"><a href="#workdir" class="header-anchor">#</a> WORKDIR</h5> <p>æ ¼å¼ä¸º WORKDIR /path/to/workdirã€‚</p> <p>ä¸ºåç»­çš„ RUNã€CMDã€ENTRYPOINT æŒ‡ä»¤é…ç½®å·¥ä½œç›®å½•ã€‚</p> <p>å¯ä»¥ä½¿ç”¨å¤šä¸ª WORKDIR æŒ‡ä»¤ï¼Œåç»­å‘½ä»¤å¦‚æœå‚æ•°æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œåˆ™ä¼šåŸºäºä¹‹å‰å‘½ä»¤æŒ‡å®šçš„è·¯å¾„ã€‚ä¾‹å¦‚</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code>WORKDIR /a
WORKDIR b
WORKDIR c
RUN pwd
</code></pre></div><p>åˆ™æœ€ç»ˆè·¯å¾„ä¸º /a/b/cã€‚</p> <h5 id="onbuild"><a href="#onbuild" class="header-anchor">#</a> ONBUILD</h5> <p>æ ¼å¼ä¸º ONBUILD [INSTRUCTION]ã€‚</p> <p>é…ç½®å½“æ‰€åˆ›å»ºçš„é•œåƒä½œä¸ºå…¶å®ƒæ–°åˆ›å»ºé•œåƒçš„åŸºç¡€é•œåƒæ—¶ï¼Œæ‰€æ‰§è¡Œçš„æ“ä½œæŒ‡ä»¤ã€‚</p> <p>ä¾‹å¦‚ï¼ŒDockerfile ä½¿ç”¨å¦‚ä¸‹çš„å†…å®¹åˆ›å»ºäº†é•œåƒ image-Aã€‚</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token punctuation">[</span><span class="token punctuation">...</span><span class="token punctuation">]</span>
ONBUILD ADD . /app/src
ONBUILD RUN /usr/local/bin/python<span class="token punctuation">-</span>build <span class="token punctuation">-</span><span class="token punctuation">-</span>dir /app/src
<span class="token punctuation">[</span><span class="token punctuation">...</span><span class="token punctuation">]</span>
</code></pre></div><p>å¦‚æœåŸºäº image-A åˆ›å»ºæ–°çš„é•œåƒæ—¶ï¼Œæ–°çš„Dockerfileä¸­ä½¿ç”¨ FROM image-AæŒ‡å®šåŸºç¡€é•œåƒæ—¶ï¼Œä¼šè‡ªåŠ¨æ‰§è¡ŒONBUILD æŒ‡ä»¤å†…å®¹ï¼Œç­‰ä»·äºåœ¨åé¢æ·»åŠ äº†ä¸¤æ¡æŒ‡ä»¤ã€‚</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code>FROM image<span class="token punctuation">-</span>A

<span class="token comment">#Automatically run the following</span>
ADD . /app/src
RUN /usr/local/bin/python<span class="token punctuation">-</span>build <span class="token punctuation">-</span><span class="token punctuation">-</span>dir /app/src
</code></pre></div><p>ä½¿ç”¨ ONBUILD æŒ‡ä»¤çš„é•œåƒï¼Œæ¨èåœ¨æ ‡ç­¾ä¸­æ³¨æ˜ï¼Œä¾‹å¦‚ ruby:1.9-onbuildã€‚</p> <h4 id="æ„å»ºé•œåƒ"><a href="#æ„å»ºé•œåƒ" class="header-anchor">#</a> æ„å»ºé•œåƒ</h4> <p>ç¼–å†™å®Œæˆ Dockerfile ä¹‹åï¼Œå¯ä»¥é€šè¿‡ docker build å‘½ä»¤æ¥æ„å»ºé•œåƒã€‚</p> <p>åŸºæœ¬çš„æ ¼å¼ä¸º docker build [é€‰é¡¹] è·¯å¾„ï¼Œè¯¥å‘½ä»¤å°†è¯»å–æŒ‡å®šè·¯å¾„ä¸‹ï¼ˆåŒ…æ‹¬å­ç›®å½•ï¼‰çš„ Dockerfileï¼Œå¹¶å°†è¯¥è·¯å¾„ä¸‹æ‰€æœ‰å†…å®¹å‘é€ç»™ Docker æœåŠ¡ç«¯ï¼Œç”±æœåŠ¡ç«¯æ¥æ„å»ºé•œåƒã€‚å› æ­¤ä¸€èˆ¬å»ºè®®æ”¾ç½® Dockerfile çš„ç›®å½•ä¸ºç©ºç›®å½•ã€‚ä¹Ÿå¯ä»¥é€šè¿‡ .dockerignore æ–‡ä»¶ï¼ˆæ¯ä¸€è¡Œæ·»åŠ ä¸€æ¡åŒ¹é…æ¨¡å¼ï¼‰æ¥è®© Docker å¿½ç•¥è·¯å¾„ä¸‹çš„ç›®å½•å’Œæ–‡ä»¶ã€‚</p> <p>è¦æŒ‡å®šé•œåƒçš„æ ‡ç­¾ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ -t é€‰é¡¹ï¼Œä¾‹å¦‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">\</span>$ <span class="token function">sudo</span> docker build -t myrepo/myapp /tmp/test1/
</code></pre></div><Valine></Valine></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">å‘å¸ƒæ—¥æœŸ:</span> <span class="time">1/4/2021, 11:15:05 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/blog/docker-compose.html" class="prev">
        Docker-composeä½¿ç”¨
      </a></span> <span class="next"><a href="/blog/flutter.html">
        å­¦ä¹ ä½¿ç”¨Flutterè¿›è¡Œç§»åŠ¨ç«¯å¼€å‘
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----><!----><div></div><div id="live2d-widget" class="live2d-widget-container" style="position:fixed;right:65px;bottom:0px;width:135px;height:300px;z-index:99999;opacity:0.8;pointer-events:none;"><canvas id="live2d_canvas" width="135" height="300" class="live2d_canvas" style="position:absolute;left:0px;top:0px;width:135px;height:300px;"></canvas></div></div></div>
    <script src="/assets/js/app.79d44716.js" defer></script><script src="/assets/js/3.02789bd5.js" defer></script><script src="/assets/js/2.40a5696b.js" defer></script><script src="/assets/js/17.c1c899ff.js" defer></script><script src="/assets/js/4.ad3dc3f9.js" defer></script>
  </body>
</html>
